06-01-2017 16:41:03.433,INFO ,B45FE8D16CCB1C62B389BBD1711D76D0,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,insertDataForAffiliation,[[vn.bananavietnam.ict.banana.component.Bnn0087IvbMManager@1355e90]] METHOD START
06-01-2017 16:41:03.433,INFO ,B45FE8D16CCB1C62B389BBD1711D76D0,U0000000001,Block delete started
06-01-2017 16:41:07.453,ERROR,B45FE8D16CCB1C62B389BBD1711D76D0,U0000000001,java.lang.Exception: Could not open JDBC Connection for transaction; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
06-01-2017 16:41:07.454,INFO ,B45FE8D16CCB1C62B389BBD1711D76D0,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,insertDataForAffiliation,[[vn.bananavietnam.ict.banana.component.Bnn0087IvbMManager@1355e90]] METHOD END
06-01-2017 16:41:10.648,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,initData,[{}] METHOD START
06-01-2017 16:41:10.663,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: select AUTHORIZATION_TYPE_ID, AUTHORIZATION_TYPE_NAME, ACCESS_AUTHORITY_ID, CREATE_USER_ID, CREATE_DATE, UPDATE_USER_ID, LAST_UPDATE_DATE, DELETE_FLAG from IVB_M_AUTHORIZATION 
06-01-2017 16:41:10.663,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 
06-01-2017 16:41:10.664,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 4
06-01-2017 16:41:10.665,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,initData,[{affiliationData=[{"authorizationTypeId":"1","authorizationTypeName":"Quản lý hệ thống","accessAuthorityId":"1","createUserId":"U0000000001","createDate":1489363200000,"updateUserId":"U0000000001","lastUpdateDate":1490054400000,"deleteFlag":false},{"authorizationTypeId":"2","authorizationTypeName":"Giám đốc kinh doanh","accessAuthorityId":"2","createUserId":"U0000000001","createDate":1489363200000,"updateUserId":"U0000000001","lastUpdateDate":1490054400000,"deleteFlag":false},{"authorizationTypeId":"3","authorizationTypeName":"Quản lý nông trại","accessAuthorityId":"3","createUserId":"U0000000001","createDate":1489363200000,"updateUserId":"U0000000001","lastUpdateDate":1490054400000,"deleteFlag":false},{"authorizationTypeId":"4","authorizationTypeName":"Quản lý lô","accessAuthorityId":"4","createUserId":"U0000000001","createDate":1489363200000,"updateUserId":"U0000000001","lastUpdateDate":1490054400000,"deleteFlag":false}]}] METHOD END
06-01-2017 16:41:10.797,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,searchData,[vn.bananavietnam.ict.banana.component.Bnn0087SearchAffiliationConditions@1189dd3] METHOD START
06-01-2017 16:41:10.797,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,Affiliation searching started
06-01-2017 16:41:10.818,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT usr.userName userName, usr.userId userId , authorization.AUTHORIZATION_TYPE_NAME typeName, authorization.AUTHORIZATION_TYPE_ID typeId, mgr.farmIdList farmIdList, mgr.areaIdList areaIdList, mgr.lastUpdateDate lastUpdateDate FROM (SELECT users.USERS_NAME userName, users.USERS_ID userId FROM IVB_M_USERS users WHERE 1 = 1 AND users.DELETE_FLAG = '0') usr LEFT JOIN (SELECT manager.USERS_ID userId, manager.AUTHORIZATION_TYPE_ID typeId, (SELECT LAST_UPDATE_DATE FROM IVB_M_MANAGER ORDER BY LAST_UPDATE_DATE DESC LIMIT 1) lastUpdateDate, GROUP_CONCAT(manager.FARM_ID SEPARATOR ',') as farmIdList, GROUP_CONCAT(manager.AREA_ID SEPARATOR ',') as areaIdList FROM IVB_M_MANAGER manager WHERE 1 = 1 AND manager.DELETE_FLAG = '0' GROUP BY manager.USERS_ID, manager.AUTHORIZATION_TYPE_ID) mgr ON usr.userId = mgr.userId LEFT JOIN IVB_M_AUTHORIZATION authorization ON authorization.AUTHORIZATION_TYPE_ID = mgr.typeId ORDER BY usr.userName, authorization.AUTHORIZATION_TYPE_ID LIMIT ?,? 
06-01-2017 16:41:10.819,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 0(Integer), 20(Integer)
06-01-2017 16:41:10.825,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 20
06-01-2017 16:41:10.825,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,SQL execution finished
06-01-2017 16:41:10.825,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT COUNT(*) FROM (SELECT users.USERS_NAME userName, users.USERS_ID userId FROM IVB_M_USERS users WHERE 1 = 1 AND users.DELETE_FLAG = '0') usr LEFT JOIN (SELECT manager.USERS_ID userId, manager.AUTHORIZATION_TYPE_ID typeId FROM IVB_M_MANAGER manager WHERE 1 = 1 AND manager.DELETE_FLAG = '0' GROUP BY manager.USERS_ID, manager.AUTHORIZATION_TYPE_ID) mgr ON usr.userId = mgr.userId LEFT JOIN IVB_M_AUTHORIZATION authorization ON authorization.AUTHORIZATION_TYPE_ID = mgr.typeId ORDER BY usr.userId 
06-01-2017 16:41:10.825,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 
06-01-2017 16:41:10.827,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 1
06-01-2017 16:41:10.827,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,Affiliation searching finished ==> 60 item(s)
06-01-2017 16:41:10.827,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,searchData,[vn.bananavietnam.ict.banana.component.Bnn0087SearchAffiliationConditions@1189dd3] METHOD END
06-01-2017 16:41:10.931,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,searchData,[vn.bananavietnam.ict.banana.component.Bnn0087SearchAffiliationConditions@f2fea6] METHOD START
06-01-2017 16:41:10.931,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,Affiliation searching started
06-01-2017 16:41:10.947,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT usr.userName userName, usr.userId userId , authorization.AUTHORIZATION_TYPE_NAME typeName, authorization.AUTHORIZATION_TYPE_ID typeId, mgr.farmIdList farmIdList, mgr.areaIdList areaIdList, mgr.lastUpdateDate lastUpdateDate FROM (SELECT users.USERS_NAME userName, users.USERS_ID userId FROM IVB_M_USERS users WHERE 1 = 1 AND users.DELETE_FLAG = '0') usr LEFT JOIN (SELECT manager.USERS_ID userId, manager.AUTHORIZATION_TYPE_ID typeId, (SELECT LAST_UPDATE_DATE FROM IVB_M_MANAGER ORDER BY LAST_UPDATE_DATE DESC LIMIT 1) lastUpdateDate, GROUP_CONCAT(manager.FARM_ID SEPARATOR ',') as farmIdList, GROUP_CONCAT(manager.AREA_ID SEPARATOR ',') as areaIdList FROM IVB_M_MANAGER manager WHERE 1 = 1 AND manager.DELETE_FLAG = '0' GROUP BY manager.USERS_ID, manager.AUTHORIZATION_TYPE_ID) mgr ON usr.userId = mgr.userId LEFT JOIN IVB_M_AUTHORIZATION authorization ON authorization.AUTHORIZATION_TYPE_ID = mgr.typeId ORDER BY usr.userName, authorization.AUTHORIZATION_TYPE_ID LIMIT ?,? 
06-01-2017 16:41:10.947,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 0(Integer), 20(Integer)
06-01-2017 16:41:10.950,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 20
06-01-2017 16:41:10.950,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,SQL execution finished
06-01-2017 16:41:10.950,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT COUNT(*) FROM (SELECT users.USERS_NAME userName, users.USERS_ID userId FROM IVB_M_USERS users WHERE 1 = 1 AND users.DELETE_FLAG = '0') usr LEFT JOIN (SELECT manager.USERS_ID userId, manager.AUTHORIZATION_TYPE_ID typeId FROM IVB_M_MANAGER manager WHERE 1 = 1 AND manager.DELETE_FLAG = '0' GROUP BY manager.USERS_ID, manager.AUTHORIZATION_TYPE_ID) mgr ON usr.userId = mgr.userId LEFT JOIN IVB_M_AUTHORIZATION authorization ON authorization.AUTHORIZATION_TYPE_ID = mgr.typeId ORDER BY usr.userId 
06-01-2017 16:41:10.951,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 
06-01-2017 16:41:10.952,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 1
06-01-2017 16:41:10.952,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,Affiliation searching finished ==> 60 item(s)
06-01-2017 16:41:10.952,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,searchData,[vn.bananavietnam.ict.banana.component.Bnn0087SearchAffiliationConditions@f2fea6] METHOD END
06-01-2017 16:41:11.075,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,getDataForAffiliation,[] METHOD START
06-01-2017 16:41:11.093,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT DISTINCT farm.FARM_NAME farmName, farm.FARM_ID farmId, area.AREA_NAME areaName, area.AREA_ID areaId, area.AREA_MANAGER areaManager, (SELECT USERS_NAME FROM IVB_M_USERS WHERE USERS_ID = AREA_MANAGER) usersName FROM IVB_M_AREA area INNER JOIN IVB_M_FARM farm ON farm.FARM_ID = area.FARM_ID WHERE farm.DELETE_FLAG = '0' AND area.DELETE_FLAG = '0' ORDER BY farm.FARM_NAME, area.AREA_NAME 
06-01-2017 16:41:11.093,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 
06-01-2017 16:41:11.095,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 26
06-01-2017 16:41:11.095,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,SQL execution finished
06-01-2017 16:41:11.095,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==>  Preparing: SELECT farm.FARM_NAME farmName, farm.FARM_ID farmId FROM IVB_M_FARM farm WHERE farm.DELETE_FLAG = '0' ORDER BY farm.FARM_NAME 
06-01-2017 16:41:11.095,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,==> Parameters: 
06-01-2017 16:41:11.096,DEBUG,75E812AED50487CE2B47EDE5A445A4D8,<==      Total: 21
06-01-2017 16:41:11.096,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,Affiliation searching finished
06-01-2017 16:41:11.097,INFO ,75E812AED50487CE2B47EDE5A445A4D8,U0000000001,vn.bananavietnam.ict.banana.service.Bnn0087SearchAffiliationService,getDataForAffiliation,[] METHOD END
